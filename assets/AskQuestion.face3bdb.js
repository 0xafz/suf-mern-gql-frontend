var K=Object.defineProperty,J=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var F=(t,e,a)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))$.call(e,a)&&F(t,a,e[a]);if(D)for(var a of D(e))O.call(e,a)&&F(t,a,e[a]);return t},v=(t,e)=>J(t,X(e));var W=(t,e)=>{var a={};for(var s in t)$.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&D)for(var s of D(t))e.indexOf(s)<0&&O.call(t,s)&&(a[s]=t[s]);return a};import{a3 as Z,_ as p,R as Y,r as A,e as ee,O as te,S as j,J as ne,q as oe,s as ae}from"./vendor.cf5572b9.js";import{a as S,j as i,U as re,F as ie,I as se,u as le,W as de,X as ce,i as ue,T as P,Y as me,c as pe,g as U}from"./index.98728a87.js";import{C as he}from"./index.dbde4364.js";function ge(t){return Z({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}const fe={"--tw-bg-opacity":"1",backgroundColor:"rgba(190, 227, 248, var(--tw-bg-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"hsla(209, 100%, 26%, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"},outlineColor:"darkorange",fontSize:".8125rem",opacity:"0.75",borderStyle:"solid",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"hsla(209, 100%, 32%, var(--tw-border-opacity))",borderRadius:"0.125rem",padding:".1rem .5rem",textDecoration:"none"},G=t=>{const d=t,{label:e,onDelete:a}=d,s=W(d,["label","onDelete"]);return S(ye,v(f({},s),{$_css:[fe,{display:"flex",alignItems:"center",height:"1.5rem",boxSizing:"content-box",margin:"2px",paddingLeft:"0.75rem",paddingRight:"0.25rem"}],children:[e,i(re,{tag:"button",onClick:a,"aria-label":`remove ${e} tag`,children:i(ge,{})})]}))};var ye=p("span").withConfig({displayName:"Chips___StyledSpan",componentId:"sc-927izd-0"})(["",""],t=>t.$_css);const _e=Y.forwardRef(function(R,k){var y=R,{disabled:e,value:a,inputValue:s,onInputChange:d,onChange:x,renderInput:h,renderTags:I,fullWidth:V,ChipProps:c}=y,Q=W(y,["disabled","value","inputValue","onInputChange","onChange","renderInput","renderTags","fullWidth","ChipProps"]);const N=!e&&(s||a.length>0),[u,E]=A.exports.useState(a),[_,b]=A.exports.useState(s||""),C=(n,r,g,B)=>{u!==r&&(x&&x(n,r,g,B),E(r))},T=n=>r=>{const g=u.slice();g.splice(n,1),C(r,g,"removeOption",{option:u[n]})},M=n=>{b(""),d&&d(n,"","clear"),C(n,[],"clear")},q=n=>{const r=n.target.value;_!==r&&(b(r),d&&d(n,r,"input"))},z=Y.useCallback((n,r)=>{let g;r?g=r:g="",b(g),d&&d(n,r,"reset")},[b,d]),o=(n,r,g="selectOption")=>{let B=Array.isArray(u)?u.slice():[];u.findIndex(H=>H===r)===-1&&(B.push(r),C(n,B,g,{option:r})),z(n,"")},l=n=>{switch(n.key){case"Enter":if(n.preventDefault(),e||!_)return;o(n,_,"selectOption");break;default:return}},w=({index:n})=>({key:n,"data-tag-index":n,tabIndex:-1,onDelete:T(n)}),m=()=>({tabIndex:-1,onClick:M});let L;return u.length>0&&(I?L=I(u,w):L=u.map((n,r)=>i(G,f(f({label:n},w({index:r})),c)))),i(ie,{children:i("div",{onKeyDown:l,children:h(f({tag:"input",disabled:e,fullWidth:!0,ref:k,value:_,onChange:q,InputProps:{startAdornment:L,endAdornment:N?i(Se,v(f({},m()),{children:i(ee,{})})):null},styles:{input:{flexGrow:"1",width:"0",minWidth:"8em"},inputRoot:{flexWrap:"wrap"}}},Q))})})});var Se=p(se).withConfig({displayName:"AutoComplete___StyledInputAdornment",componentId:"sc-6amhk0-0"})({cursor:"pointer",fontSize:"1.5em"});const be=te({title:j().required("Required").min(50,"Must be at least 50 characters"),body:j().required("Required").min(100,"Must be at least 100 characters")}),Te=()=>{var q,z;const t=ne(),{editingQuestion:e,clearEdit:a,notify:s}=le(),[d,x]=A.exports.useState(""),[h,I]=A.exports.useState(e?e.tags:[]),[V,c]=A.exports.useState(""),{register:Q,handleSubmit:k,reset:R,formState:{errors:y}}=oe({defaultValues:{title:e?e.title:"",body:e?e.body:""},mode:"onChange",resolver:ae(be)}),[N,{loading:u}]=de({onError:o=>{c(U(o))}}),[E,{loading:_}]=ce({onError:o=>{c(U(o))}}),b=({title:o,body:l})=>{if(h.length===0)return c("Atleast one tag must be added.");N({variables:{title:o,body:l,tags:h},update:(w,{data:m})=>{t(`/questions/${m==null?void 0:m.postQuestion._id}`),R(),s("Question posted!")}})},C=({title:o,body:l})=>{if(h.length===0)return c("Atleast one tag must be added.");E({variables:{quesId:e.quesId,title:o,body:l,tags:h},update:(w,{data:m})=>{t(`/questions/${m==null?void 0:m.editQuestion._id}`),a(),s("Edit successful!")}})},T=o=>{const l=o.toLowerCase().trim();if(!/^[a-zA-Z0-9-]*$/.test(o))return c("Only alphanumeric characters & dash are allowed.");if(l.length>15)return c("A single tag can't have more than 15 characters.");x(l)},M=o=>{if(o.length<h.length){I(o);return}if(o.length>5){x(""),c("Max 5 tags can be added! Not more than that.");return}if(h.includes(d))return c("Duplicate tag found! You can't add the same tag twice.");I(o)};return S(he,{children:[S(ue,{to:_?`/questions/${e.quesId}`:"/",children:[" ","< Back"]}),i(we,{children:e?"Edit Your Question":"Ask a public question"}),S(ve,{onSubmit:k(e?C:b),children:[S(xe,{children:[i(Ie,{children:"Be specific and imagine you\u2019re asking a question to another person"}),i(P,v(f({tag:"input",required:!0,fullWidth:!0},Q("title")),{placeholder:"Enter atleast 50 characters",type:"text",label:"Title",error:"title"in y,helperText:"title"in y?(q=y.title)==null?void 0:q.message:""}))]}),S(Ce,{children:[i(Ae,{children:"Include all the information someone would need to answer your question"}),i(P,v(f({tag:"textarea",required:!0,rows:5,fullWidth:!0},Q("body")),{placeholder:"Enter atleast 100 characters",label:"Body",error:"body"in y,helperText:"body"in y?(z=y.body)==null?void 0:z.message:""}))]}),S(Qe,{children:[i(ke,{children:"Add up to 5 tags to describe what your question is about"}),i(_e,{value:h,inputValue:d,onInputChange:(o,l)=>{T(l)},onChange:(o,l)=>{M(l)},renderInput:o=>i(P,v(f({},o),{label:"Tags",placeholder:"press Enter to add tags",fullWidth:!0})),renderTags:(o,l)=>h.map((w,m)=>i(G,f({label:w,color:"primary",size:"small"},l({index:m}))))})]}),i(qe,{type:"submit",disabled:u||_,children:e?"Update Your Question":"Post Your Question"}),i(me,{errorMsg:V,clearErrorMsg:()=>c("")})]})]})};var we=p("h1").withConfig({displayName:"AskQuestion___StyledH",componentId:"sc-1a45n54-0"})({fontSize:"1.25rem"}),ve=p("form").withConfig({displayName:"AskQuestion___StyledForm",componentId:"sc-1a45n54-1"})({marginTop:"1rem"}),xe=p("div").withConfig({displayName:"AskQuestion___StyledDiv",componentId:"sc-1a45n54-2"})({marginBottom:"1rem"}),Ie=p("p").withConfig({displayName:"AskQuestion___StyledP",componentId:"sc-1a45n54-3"})({fontSize:".8125rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:".9375rem"}}),Ce=p("div").withConfig({displayName:"AskQuestion___StyledDiv2",componentId:"sc-1a45n54-4"})({marginBottom:"1rem"}),Ae=p("p").withConfig({displayName:"AskQuestion___StyledP2",componentId:"sc-1a45n54-5"})({fontSize:".8125rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:".9375rem"}}),Qe=p("div").withConfig({displayName:"AskQuestion___StyledDiv3",componentId:"sc-1a45n54-6"})({marginBottom:"1rem"}),ke=p("p").withConfig({displayName:"AskQuestion___StyledP3",componentId:"sc-1a45n54-7"})({fontSize:".8125rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:".9375rem"}}),qe=p(pe).withConfig({displayName:"AskQuestion___StyledButton",componentId:"sc-1a45n54-8"})({fontSize:".9375rem","@media (min-width: 640px)":{fontSize:"1rem"}});export{Te as default};
