var U=Object.defineProperty,Z=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&F(e,n,t[n]);if(q)for(var n of q(t))O.call(t,n)&&F(e,n,t[n]);return e},v=(e,t)=>Z(e,J(t));var P=(e,t)=>{var n={};for(var s in e)$.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&q)for(var s of q(e))t.indexOf(s)<0&&O.call(e,s)&&(n[s]=e[s]);return n};import{a7 as X,_ as c,a as _,j as i,a8 as tt,R as j,r as C,F as et,a9 as ot,I as at,O as nt,s as Y,$ as rt,d as it,t as st,v as lt,aa as dt,ab as ct,T as R,ac as ut,m as mt,b as pt,h as G}from"./index.badb0460.js";function gt(e){return X({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}const ht={"--tw-bg-opacity":"1",backgroundColor:"rgba(233, 216, 253, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(68, 51, 122, var(--tw-text-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgba(68, 51, 122, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"},outlineColor:"darkorange",fontSize:"0.75rem",opacity:"0.75",borderStyle:"solid",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgba(85, 60, 154, var(--tw-border-opacity))",borderRadius:"0.125rem",padding:".1rem .5rem",textDecoration:"none"},H=e=>{const d=e,{label:t,onDelete:n}=d,s=P(d,["label","onDelete"]);return _(yt,v(y({},s),{$_css:[ht,{display:"flex",alignItems:"center",height:"1.5rem",boxSizing:"content-box",margin:"2px",paddingLeft:"0.75rem",paddingRight:"0.25rem"}],children:[t,i(tt,{tag:"button",onClick:n,children:i(gt,{})})]}))};var yt=c("span").withConfig({displayName:"Chips___StyledSpan",componentId:"sc-927izd-0"})(["",""],e=>e.$_css);const ft=j.forwardRef(function(W,Q){var f=W,{disabled:t,value:n,inputValue:s,onInputChange:d,onChange:x,renderInput:g,renderTags:I,fullWidth:V,ChipProps:u}=f,k=P(f,["disabled","value","inputValue","onInputChange","onChange","renderInput","renderTags","fullWidth","ChipProps"]);const B=!t&&(s||n.length>0),[m,E]=C.exports.useState(n),[b,w]=C.exports.useState(s||""),A=(o,r,h,N)=>{m!==r&&(x&&x(o,r,h,N),E(r))},L=o=>r=>{const h=m.slice();h.splice(o,1),A(r,h,"removeOption",{option:m[o]})},T=o=>{w(""),d&&d(o,"","clear"),A(o,[],"clear")},z=o=>{const r=o.target.value;b!==r&&(w(r),d&&d(o,r,"input"))},D=j.useCallback((o,r)=>{let h;r?h=r:h="",w(h),d&&d(o,r,"reset")},[w,d]),a=(o,r,h="selectOption")=>{let N=Array.isArray(m)?m.slice():[];m.findIndex(K=>K===r)===-1&&(N.push(r),A(o,N,h,{option:r})),D(o,"")},l=o=>{switch(o.key){case"Enter":if(o.preventDefault(),t||!b)return;a(o,b,"selectOption");break;default:return}},S=({index:o})=>({key:o,"data-tag-index":o,tabIndex:-1,onDelete:L(o)}),p=()=>({tabIndex:-1,onClick:T});let M;return m.length>0&&(I?M=I(m,S):M=m.map((o,r)=>i(H,y(y({label:o},S({index:r})),u)))),i(et,{children:i("div",{onKeyDown:l,children:g(y({tag:"input",disabled:t,fullWidth:!0,ref:Q,value:b,onChange:z,InputProps:{startAdornment:M,endAdornment:B?i(_t,v(y({},p()),{children:i(ot,{})})):null},styles:{input:{flexGrow:"1",width:"0",minWidth:"8em"},inputRoot:{flexWrap:"wrap"}}},k))})})});var _t=c(at).withConfig({displayName:"AutoComplete___StyledInputAdornment",componentId:"sc-6amhk0-0"})({cursor:"pointer",fontSize:"1.5em"});const bt=nt({title:Y().required("Required").min(15,"Must be at least 15 characters"),body:Y().required("Required").min(30,"Must be at least 30 characters")}),Et=()=>{var z,D;const e=rt(),{editingQuestion:t,clearEdit:n,notify:s}=it(),[d,x]=C.exports.useState(""),[g,I]=C.exports.useState(t?t.tags:[]),[V,u]=C.exports.useState(""),{register:k,handleSubmit:Q,reset:W,formState:{errors:f}}=st({defaultValues:{title:t?t.title:"",body:t?t.body:""},mode:"onChange",resolver:lt(bt)}),[B,{loading:m}]=dt({onError:a=>{u(G(a))}}),[E,{loading:b}]=ct({onError:a=>{u(G(a))}}),w=({title:a,body:l})=>{if(g.length===0)return u("Atleast one tag must be added.");B({variables:{title:a,body:l,tags:g},update:(S,{data:p})=>{e(`/questions/${p==null?void 0:p.postQuestion._id}`),W(),s("Question posted!")}})},A=({title:a,body:l})=>{if(g.length===0)return u("Atleast one tag must be added.");E({variables:{quesId:t.quesId,title:a,body:l,tags:g},update:(S,{data:p})=>{e(`/questions/${p==null?void 0:p.editQuestion._id}`),n(),s("Edit successful!")}})},L=a=>{const l=a.toLowerCase().trim();if(!/^[a-zA-Z0-9-]*$/.test(a))return u("Only alphanumeric characters & dash are allowed.");if(l.length>15)return u("A single tag can't have more than 15 characters.");x(l)},T=a=>{if(a.length<g.length){I(a);return}if(a.length>5){x(""),u("Max 5 tags can be added! Not more than that."),console.log("error");return}if(g.includes(d))return u("Duplicate tag found! You can't add the same tag twice.");console.log("set"),I(a)};return _(wt,{children:[_(St,{to:`/questions/${t.quesId}`,children:[" ","< Back"]}),i(vt,{children:t?"Edit Your Question":"Ask A Question"}),_(xt,{onSubmit:Q(t?A:w),children:[_(It,{children:[i(At,{children:"Be specific and imagine you\u2019re asking a question to another person"}),i(R,v(y({tag:"input",required:!0,fullWidth:!0},k("title")),{placeholder:"Enter atleast 15 characters",type:"text",label:"Title",error:"title"in f,helperText:"title"in f?(z=f.title)==null?void 0:z.message:""}))]}),_(Ct,{children:[i(kt,{children:"Include all the information someone would need to answer your question"}),i(R,v(y({tag:"textarea",required:!0,rows:5,fullWidth:!0},k("body")),{placeholder:"Enter atleast 30 characters",label:"Body",error:"body"in f,helperText:"body"in f?(D=f.body)==null?void 0:D.message:""}))]}),_(Qt,{children:[i(zt,{children:"Add up to 5 tags to describe what your question is about"}),i(ft,{value:g,inputValue:d,onInputChange:(a,l)=>{L(l)},onChange:(a,l)=>{T(l)},renderInput:a=>i(R,v(y({},a),{label:"Tags",placeholder:"press Enter to add tags",fullWidth:!0})),renderTags:(a,l)=>g.map((S,p)=>i(H,y({label:S,color:"primary",size:"small"},l({index:p}))))})]}),i(Dt,{type:"submit",disabled:m||b,children:t?"Update Your Question":"Post Your Question"}),i(ut,{errorMsg:V,clearErrorMsg:()=>u("")})]})]})};var wt=c("div").withConfig({displayName:"AskQuestion___StyledDiv",componentId:"sc-1a45n54-0"})({width:"100%",marginTop:"1.5rem",marginBottom:"1.5rem",marginLeft:"0.75rem",marginRight:"0.75rem"}),St=c(mt).withConfig({displayName:"AskQuestion___StyledLink",componentId:"sc-1a45n54-1"})({"--tw-text-opacity":"1",color:"rgba(85, 60, 154, var(--tw-text-opacity))"}),vt=c("h1").withConfig({displayName:"AskQuestion___StyledH",componentId:"sc-1a45n54-2"})({"--tw-text-opacity":"1",color:"rgba(68, 51, 122, var(--tw-text-opacity))",fontSize:"1.25rem"}),xt=c("form").withConfig({displayName:"AskQuestion___StyledForm",componentId:"sc-1a45n54-3"})({marginTop:"1rem","--tw-text-opacity":"1",color:"rgba(85, 60, 154, var(--tw-text-opacity))"}),It=c("div").withConfig({displayName:"AskQuestion___StyledDiv2",componentId:"sc-1a45n54-4"})({marginBottom:"1rem"}),At=c("p").withConfig({displayName:"AskQuestion___StyledP",componentId:"sc-1a45n54-5"})({fontSize:"0.75rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:"0.875rem"}}),Ct=c("div").withConfig({displayName:"AskQuestion___StyledDiv3",componentId:"sc-1a45n54-6"})({marginBottom:"1rem"}),kt=c("p").withConfig({displayName:"AskQuestion___StyledP2",componentId:"sc-1a45n54-7"})({fontSize:"0.75rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:"0.875rem"}}),Qt=c("div").withConfig({displayName:"AskQuestion___StyledDiv4",componentId:"sc-1a45n54-8"})({marginBottom:"1rem"}),zt=c("p").withConfig({displayName:"AskQuestion___StyledP3",componentId:"sc-1a45n54-9"})({fontSize:"0.75rem",marginBottom:"0.5rem","@media (min-width: 768px)":{fontSize:"0.875rem"}}),Dt=c(pt).withConfig({displayName:"AskQuestion___StyledButton",componentId:"sc-1a45n54-10"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(107, 70, 193, var(--tw-bg-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgba(85, 60, 154, var(--tw-bg-opacity))"},fontSize:"0.875rem","@media (min-width: 640px)":{fontSize:"1rem"}});export{Et as default};
